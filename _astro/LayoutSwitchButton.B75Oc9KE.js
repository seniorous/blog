import{o as N,i as O,b as S,s as R}from"./lifecycle.93sJC7Cf.js";import{z as I,A as D,c as F,f as J,a as L,p as U,b as W,e as i,g as t,k as v,m as y,u as E,d as T,r as q,t as X,w as x,h as Y,B as H}from"./utils.B7PHiYi3.js";import{i as B}from"./if.BJgN68_l.js";import{p as Z}from"./props.D5mhnFgQ.js";import{s as $,a as _}from"./config.Rdkpnirw.js";import{i as f}from"./translation.BTgvWXU-.js";import{I as p}from"./zh_TW.B395Vq90.js";/* empty css                        */var tt=H('<svg class="w-5 h-5 icon-transition svelte-8vwu4q" fill="currentColor" viewBox="0 0 24 24"><path d="M4 6h16v2H4zm0 5h16v2H4zm0 5h16v2H4z" class="svelte-8vwu4q"></path></svg>'),et=H('<svg class="w-5 h-5 icon-transition svelte-8vwu4q" fill="currentColor" viewBox="0 0 24 24"><path d="M3 3h7v7H3V3zm0 11h7v7H3v-7zm11-11h7v7h-7V3zm0 11h7v7h-7v-7z" class="svelte-8vwu4q"></path></svg>'),st=Y('<button type="button"><div class="icon-container w-5 h-5 flex items-center justify-center relative svelte-8vwu4q"><!></div></button>');function dt(A,k){W(k,!1);let b=Z(k,"currentLayout",12,"list"),u=y(!1),c=y(!1),w=y(!1),o=y("list"),n=null;const j=$.responsive?.breakpoints?.desktop??1280;function G(e){typeof window<"u"&&window.dispatchEvent(new CustomEvent("layoutChange",{detail:{layout:e}}))}function C(e){sessionStorage.setItem("postListLayout",e),localStorage.setItem("postListLayout",e)}function M(){return sessionStorage.getItem("postListLayout")}function K(){if(!t(u)||t(c)||t(w))return;i(w,!0);const e=t(o)==="list"?"grid":"list";i(o,e),C(e)}function P(){i(w,!1)}function m(e){i(c,!e.matches)}N(()=>{i(u,!0);const e=M(),a=_.postListLayout.defaultMode;e==="list"||e==="grid"?(i(o,e),localStorage.getItem("postListLayout")!==e&&localStorage.setItem("postListLayout",e)):(i(o,a),C(a)),n=window.matchMedia(`(min-width: ${j}px)`),m(n),n.addEventListener?n.addEventListener("change",m):n.addListener(m);const d=s=>{s.detail?.layout&&i(o,s.detail.layout)},r=()=>{setTimeout(()=>{const s=M();s==="list"||s==="grid"?i(o,s):i(o,_.postListLayout.defaultMode)},200)};window.addEventListener("layoutChange",d);const g=()=>{const s=window.swup;s?.hooks?(s.hooks.on("content:replace",r),s.hooks.on("page:view",r)):window.addEventListener("popstate",r)};return window.swup?g():setTimeout(g,200),()=>{n&&(n.removeEventListener?n.removeEventListener("change",m):n.removeListener(m)),window.removeEventListener("layoutChange",d),window.removeEventListener("popstate",r);const s=window.swup;s?.hooks&&(s.hooks.off("content:replace",r),s.hooks.off("page:view",r))}}),I(()=>(t(c),t(o)),()=>{b(t(c)?"list":t(o))}),I(()=>(t(u),v(b())),()=>{t(u)&&G(b())}),D(),O();var z=F(),Q=J(z);{var V=e=>{var a=st(),d=T(a),r=T(d);{var g=l=>{var h=tt();L(l,h)},s=l=>{var h=et();L(l,h)};B(r,l=>{t(o)==="list"?l(g):l(s,!1)})}q(d),q(a),X((l,h)=>{S(a,"aria-label",l),S(a,"aria-pressed",t(o)==="grid"),R(a,1,`btn-plain scale-animation rounded-lg h-11 w-11 active:scale-90 flex items-center justify-center theme-switch-btn ${t(w)?"switching":""}`,"svelte-8vwu4q"),a.disabled=t(w),S(a,"title",h)},[()=>(t(o),v(f),v(p),E(()=>t(o)==="list"?f(p.switchToGridMode):f(p.switchToListMode))),()=>(t(o),v(f),v(p),E(()=>t(o)==="list"?f(p.switchToGridMode):f(p.switchToListMode)))]),x("animationend",d,P),x("click",a,K),L(e,a)};B(Q,e=>{t(u),v(_),t(c),E(()=>t(u)&&_.postListLayout.allowSwitch&&!t(c))&&e(V)})}L(A,z),U()}export{dt as default};
