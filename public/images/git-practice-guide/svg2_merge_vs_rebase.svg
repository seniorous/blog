<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 560" font-family="Segoe UI, sans-serif">
  <defs>
    <filter id="ds2" x="-4%" y="-4%" width="110%" height="116%">
      <feGaussianBlur in="SourceAlpha" stdDeviation="2"/>
      <feOffset dx="1" dy="2" result="offsetblur"/>
      <feComponentTransfer><feFuncA type="linear" slope="0.08"/></feComponentTransfer>
      <feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge>
    </filter>
  </defs>
  <rect width="900" height="560" fill="#fafbfc" rx="8"/>

  <!-- Title -->
  <text x="450" y="36" text-anchor="middle" font-size="18" font-weight="700" fill="#1e40af">merge vs rebase：何时用哪个？</text>
  <line x1="160" y1="48" x2="740" y2="48" stroke="#e5e7eb" stroke-width="1"/>

  <!-- LEFT: merge -->
  <rect x="30" y="65" width="410" height="240" rx="8" fill="#f0f4ff" stroke="#1e40af" stroke-width="1.5" filter="url(#ds2)"/>
  <text x="235" y="92" text-anchor="middle" font-size="15" font-weight="700" fill="#1e40af">git merge</text>

  <!-- merge diagram -->
  <line x1="70" y1="140" x2="380" y2="140" stroke="#1e40af" stroke-width="2.5"/>
  <text x="55" y="135" font-size="10" fill="#1e40af" font-weight="600">main</text>
  <circle cx="110" cy="140" r="10" fill="#dbeafe" stroke="#1e40af" stroke-width="2"/>
  <text x="110" y="143" text-anchor="middle" font-size="8" font-weight="600" fill="#1e40af">C1</text>
  <circle cx="180" cy="140" r="10" fill="#dbeafe" stroke="#1e40af" stroke-width="2"/>
  <text x="180" y="143" text-anchor="middle" font-size="8" font-weight="600" fill="#1e40af">C2</text>
  <circle cx="310" cy="140" r="10" fill="#dbeafe" stroke="#1e40af" stroke-width="2"/>
  <text x="310" y="143" text-anchor="middle" font-size="8" font-weight="600" fill="#1e40af">C4</text>
  <circle cx="370" cy="140" r="12" fill="#1e40af" stroke="#1e40af" stroke-width="2"/>
  <text x="370" y="143" text-anchor="middle" font-size="8" font-weight="700" fill="#fff">M</text>

  <!-- feature branch for merge -->
  <path d="M180,140 Q200,190 220,200" fill="none" stroke="#10b981" stroke-width="2"/>
  <line x1="220" y1="200" x2="320" y2="200" stroke="#10b981" stroke-width="2"/>
  <path d="M320,200 Q350,170 370,140" fill="none" stroke="#10b981" stroke-width="2" stroke-dasharray="4,3"/>
  <circle cx="240" cy="200" r="10" fill="#d1fae5" stroke="#10b981" stroke-width="2"/>
  <text x="240" y="203" text-anchor="middle" font-size="8" font-weight="600" fill="#10b981">C3</text>
  <circle cx="300" cy="200" r="10" fill="#d1fae5" stroke="#10b981" stroke-width="2"/>
  <text x="300" y="203" text-anchor="middle" font-size="8" font-weight="600" fill="#10b981">C5</text>

  <!-- merge result label -->
  <text x="235" y="250" text-anchor="middle" font-size="11" fill="#374151">保留完整分支历史</text>
  <text x="235" y="268" text-anchor="middle" font-size="11" fill="#374151">生成合并提交节点</text>
  <text x="235" y="286" text-anchor="middle" font-size="11" fill="#10b981" font-weight="600">✓ 适合：合并到公共分支</text>

  <!-- RIGHT: rebase -->
  <rect x="460" y="65" width="410" height="240" rx="8" fill="#fefce8" stroke="#f59e0b" stroke-width="1.5" filter="url(#ds2)"/>
  <text x="665" y="92" text-anchor="middle" font-size="15" font-weight="700" fill="#f59e0b">git rebase</text>

  <!-- rebase diagram: before -->
  <text x="490" y="120" font-size="10" fill="#6b7280" font-weight="600">Before</text>
  <line x1="530" y1="140" x2="700" y2="140" stroke="#1e40af" stroke-width="2"/>
  <circle cx="560" cy="140" r="8" fill="#dbeafe" stroke="#1e40af" stroke-width="1.5"/>
  <circle cx="620" cy="140" r="8" fill="#dbeafe" stroke="#1e40af" stroke-width="1.5"/>
  <circle cx="680" cy="140" r="8" fill="#dbeafe" stroke="#1e40af" stroke-width="1.5"/>
  <path d="M620,140 Q630,170 650,180" fill="none" stroke="#10b981" stroke-width="1.5"/>
  <line x1="650" y1="180" x2="720" y2="180" stroke="#10b981" stroke-width="1.5"/>
  <circle cx="670" cy="180" r="8" fill="#d1fae5" stroke="#10b981" stroke-width="1.5"/>
  <circle cx="710" cy="180" r="8" fill="#d1fae5" stroke="#10b981" stroke-width="1.5"/>

  <!-- rebase diagram: after -->
  <text x="490" y="220" font-size="10" fill="#6b7280" font-weight="600">After</text>
  <line x1="530" y1="240" x2="830" y2="240" stroke="#1e40af" stroke-width="2"/>
  <circle cx="560" cy="240" r="8" fill="#dbeafe" stroke="#1e40af" stroke-width="1.5"/>
  <circle cx="620" cy="240" r="8" fill="#dbeafe" stroke="#1e40af" stroke-width="1.5"/>
  <circle cx="680" cy="240" r="8" fill="#dbeafe" stroke="#1e40af" stroke-width="1.5"/>
  <circle cx="740" cy="240" r="8" fill="#fef3c7" stroke="#f59e0b" stroke-width="2"/>
  <text x="740" y="243" text-anchor="middle" font-size="7" font-weight="600" fill="#f59e0b">C3'</text>
  <circle cx="800" cy="240" r="8" fill="#fef3c7" stroke="#f59e0b" stroke-width="2"/>
  <text x="800" y="243" text-anchor="middle" font-size="7" font-weight="600" fill="#f59e0b">C5'</text>

  <text x="665" y="275" text-anchor="middle" font-size="11" fill="#374151">线性历史，无合并节点</text>
  <text x="665" y="293" text-anchor="middle" font-size="11" fill="#f59e0b" font-weight="600">✓ 适合：更新个人分支</text>

  <!-- Decision table -->
  <rect x="30" y="330" width="840" height="210" rx="8" fill="#fff" stroke="#e5e7eb" stroke-width="1.5" filter="url(#ds2)"/>
  <text x="450" y="358" text-anchor="middle" font-size="14" font-weight="700" fill="#1e40af">实战决策指南</text>

  <!-- Table header -->
  <rect x="50" y="372" width="200" height="32" rx="4" fill="#1e40af"/>
  <text x="150" y="393" text-anchor="middle" font-size="12" font-weight="600" fill="#fff">场景</text>
  <rect x="250" y="372" width="200" height="32" rx="4" fill="#1e40af"/>
  <text x="350" y="393" text-anchor="middle" font-size="12" font-weight="600" fill="#fff">推荐命令</text>
  <rect x="450" y="372" width="400" height="32" rx="4" fill="#1e40af"/>
  <text x="650" y="393" text-anchor="middle" font-size="12" font-weight="600" fill="#fff">原因</text>

  <!-- Row 1 -->
  <rect x="50" y="404" width="200" height="32" rx="0" fill="#f9fafb" stroke="#e5e7eb" stroke-width="0.5"/>
  <text x="150" y="424" text-anchor="middle" font-size="11" fill="#374151">feature → main</text>
  <rect x="250" y="404" width="200" height="32" rx="0" fill="#f9fafb" stroke="#e5e7eb" stroke-width="0.5"/>
  <text x="350" y="424" text-anchor="middle" font-size="11" fill="#10b981" font-weight="600">merge --no-ff</text>
  <rect x="450" y="404" width="400" height="32" rx="0" fill="#f9fafb" stroke="#e5e7eb" stroke-width="0.5"/>
  <text x="650" y="424" text-anchor="middle" font-size="11" fill="#374151">保留功能分支合并记录</text>

  <!-- Row 2 -->
  <rect x="50" y="436" width="200" height="32" rx="0" fill="#fff" stroke="#e5e7eb" stroke-width="0.5"/>
  <text x="150" y="456" text-anchor="middle" font-size="11" fill="#374151">同步远程 main 到本地 feature</text>
  <rect x="250" y="436" width="200" height="32" rx="0" fill="#fff" stroke="#e5e7eb" stroke-width="0.5"/>
  <text x="350" y="456" text-anchor="middle" font-size="11" fill="#f59e0b" font-weight="600">rebase main</text>
  <rect x="450" y="436" width="400" height="32" rx="0" fill="#fff" stroke="#e5e7eb" stroke-width="0.5"/>
  <text x="650" y="456" text-anchor="middle" font-size="11" fill="#374151">保持线性历史，减少合并噪音</text>

  <!-- Row 3 -->
  <rect x="50" y="468" width="200" height="32" rx="0" fill="#f9fafb" stroke="#e5e7eb" stroke-width="0.5"/>
  <text x="150" y="488" text-anchor="middle" font-size="11" fill="#374151">已推送的公共分支</text>
  <rect x="250" y="468" width="200" height="32" rx="0" fill="#f9fafb" stroke="#e5e7eb" stroke-width="0.5"/>
  <text x="350" y="488" text-anchor="middle" font-size="11" fill="#ef4444" font-weight="600">禁止 rebase</text>
  <rect x="450" y="468" width="400" height="32" rx="0" fill="#f9fafb" stroke="#e5e7eb" stroke-width="0.5"/>
  <text x="650" y="488" text-anchor="middle" font-size="11" fill="#374151">rebase 会改写历史，影响他人</text>

  <!-- Row 4 -->
  <rect x="50" y="500" width="200" height="32" rx="0" fill="#fff" stroke="#e5e7eb" stroke-width="0.5"/>
  <text x="150" y="520" text-anchor="middle" font-size="11" fill="#374151">整理本地提交</text>
  <rect x="250" y="500" width="200" height="32" rx="0" fill="#fff" stroke="#e5e7eb" stroke-width="0.5"/>
  <text x="350" y="520" text-anchor="middle" font-size="11" fill="#f59e0b" font-weight="600">rebase -i</text>
  <rect x="450" y="500" width="400" height="32" rx="0" fill="#fff" stroke="#e5e7eb" stroke-width="0.5"/>
  <text x="650" y="520" text-anchor="middle" font-size="11" fill="#374151">交互式编辑、合并、重排提交</text>
</svg>