<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 520" font-family="Segoe UI, sans-serif">
  <defs>
    <filter id="ds3" x="-4%" y="-4%" width="110%" height="116%">
      <feGaussianBlur in="SourceAlpha" stdDeviation="2"/>
      <feOffset dx="1" dy="2" result="offsetblur"/>
      <feComponentTransfer><feFuncA type="linear" slope="0.08"/></feComponentTransfer>
      <feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge>
    </filter>
    <marker id="ah3" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto">
      <polygon points="0 0, 8 3, 0 6" fill="#3b82f6"/>
    </marker>
    <marker id="ah3r" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto">
      <polygon points="0 0, 8 3, 0 6" fill="#ef4444"/>
    </marker>
    <marker id="ah3g" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto">
      <polygon points="0 0, 8 3, 0 6" fill="#10b981"/>
    </marker>
  </defs>
  <rect width="900" height="520" fill="#fafbfc" rx="8"/>

  <!-- Title -->
  <text x="450" y="36" text-anchor="middle" font-size="18" font-weight="700" fill="#1e40af">撤销操作决策树：我该用哪个命令？</text>
  <line x1="160" y1="48" x2="740" y2="48" stroke="#e5e7eb" stroke-width="1"/>

  <!-- Start node -->
  <rect x="340" y="65" width="220" height="44" rx="22" fill="#1e40af" filter="url(#ds3)"/>
  <text x="450" y="92" text-anchor="middle" font-size="13" font-weight="700" fill="#fff">需要撤销某个操作？</text>

  <!-- Decision 1: local or remote? -->
  <line x1="450" y1="109" x2="450" y2="140" stroke="#3b82f6" stroke-width="2" marker-end="url(#ah3)"/>

  <rect x="320" y="145" width="260" height="40" rx="6" fill="#ede9fe" stroke="#7c3aed" stroke-width="1.5" filter="url(#ds3)"/>
  <text x="450" y="170" text-anchor="middle" font-size="12" font-weight="600" fill="#7c3aed">这个提交已经推送到远程了吗？</text>

  <!-- Left: local only -->
  <line x1="320" y1="165" x2="160" y2="240" stroke="#10b981" stroke-width="2" marker-end="url(#ah3g)"/>
  <text x="220" y="195" font-size="11" fill="#10b981" font-weight="600">否（仅本地）</text>

  <rect x="50" y="240" width="220" height="44" rx="6" fill="#f0fdf4" stroke="#10b981" stroke-width="1.5" filter="url(#ds3)"/>
  <text x="160" y="267" text-anchor="middle" font-size="12" font-weight="600" fill="#10b981">git reset</text>

  <!-- reset options -->
  <line x1="100" y1="284" x2="100" y2="320" stroke="#10b981" stroke-width="1.5" marker-end="url(#ah3g)"/>
  <line x1="160" y1="284" x2="160" y2="320" stroke="#10b981" stroke-width="1.5" marker-end="url(#ah3g)"/>
  <line x1="220" y1="284" x2="220" y2="320" stroke="#10b981" stroke-width="1.5" marker-end="url(#ah3g)"/>

  <rect x="40" y="325" width="120" height="60" rx="6" fill="#fff" stroke="#10b981" stroke-width="1" filter="url(#ds3)"/>
  <text x="100" y="347" text-anchor="middle" font-size="11" font-weight="600" fill="#10b981">--soft</text>
  <text x="100" y="365" text-anchor="middle" font-size="9" fill="#6b7280">保留改动在暂存区</text>
  <text x="100" y="378" text-anchor="middle" font-size="9" fill="#6b7280">可重新提交</text>

  <rect x="110" y="325" width="100" height="60" rx="6" fill="#fff" stroke="#f59e0b" stroke-width="1" filter="url(#ds3)"/>
  <text x="160" y="347" text-anchor="middle" font-size="11" font-weight="600" fill="#f59e0b">--mixed</text>
  <text x="160" y="365" text-anchor="middle" font-size="9" fill="#6b7280">保留改动在</text>
  <text x="160" y="378" text-anchor="middle" font-size="9" fill="#6b7280">工作区「默认」</text>

  <rect x="170" y="325" width="100" height="60" rx="6" fill="#fff" stroke="#ef4444" stroke-width="1" filter="url(#ds3)"/>
  <text x="220" y="347" text-anchor="middle" font-size="11" font-weight="600" fill="#ef4444">--hard</text>
  <text x="220" y="365" text-anchor="middle" font-size="9" fill="#6b7280">彻底丢弃改动</text>
  <text x="220" y="378" text-anchor="middle" font-size="9" fill="#ef4444">⚠ 不可恢复</text>

  <!-- Right: already pushed -->
  <line x1="580" y1="165" x2="720" y2="240" stroke="#ef4444" stroke-width="2" marker-end="url(#ah3r)"/>
  <text x="670" y="195" font-size="11" fill="#ef4444" font-weight="600">是（已推送）</text>

  <rect x="620" y="240" width="220" height="44" rx="6" fill="#fef2f2" stroke="#ef4444" stroke-width="1.5" filter="url(#ds3)"/>
  <text x="730" y="267" text-anchor="middle" font-size="12" font-weight="600" fill="#ef4444">git revert</text>

  <!-- revert explanation -->
  <rect x="600" y="310" width="260" height="80" rx="6" fill="#fff" stroke="#e5e7eb" stroke-width="1" filter="url(#ds3)"/>
  <text x="730" y="335" text-anchor="middle" font-size="11" font-weight="600" fill="#374151">生成一个新的「反向提交」</text>
  <text x="730" y="355" text-anchor="middle" font-size="10" fill="#6b7280">不改写历史，安全用于公共分支</text>
  <text x="730" y="375" text-anchor="middle" font-size="10" fill="#10b981">✓ 协作安全</text>

  <line x1="730" y1="284" x2="730" y2="305" stroke="#ef4444" stroke-width="1.5" marker-end="url(#ah3r)"/>

  <!-- cherry-pick section -->
  <rect x="310" y="420" width="280" height="80" rx="8" fill="#fefce8" stroke="#f59e0b" stroke-width="1.5" filter="url(#ds3)"/>
  <text x="450" y="445" text-anchor="middle" font-size="13" font-weight="700" fill="#f59e0b">git cherry-pick</text>
  <text x="450" y="465" text-anchor="middle" font-size="10" fill="#374151">只需要某几个特定提交？</text>
  <text x="450" y="483" text-anchor="middle" font-size="10" fill="#374151">cherry-pick C2 C4 → 精确挑选到当前分支</text>

  <!-- Warning box -->
  <rect x="30" y="420" width="250" height="80" rx="8" fill="#fef2f2" stroke="#ef4444" stroke-width="1" filter="url(#ds3)"/>
  <text x="155" y="445" text-anchor="middle" font-size="12" font-weight="700" fill="#ef4444">⚠ 黄金法则</text>
  <text x="155" y="465" text-anchor="middle" font-size="10" fill="#374151">已推送的提交 → 只用 revert</text>
  <text x="155" y="483" text-anchor="middle" font-size="10" fill="#374151">未推送的提交 → reset / rebase -i</text>

  <!-- Tip box -->
  <rect x="620" y="420" width="250" height="80" rx="8" fill="#f0fdf4" stroke="#10b981" stroke-width="1" filter="url(#ds3)"/>
  <text x="745" y="445" text-anchor="middle" font-size="12" font-weight="700" fill="#10b981">💡 实用技巧</text>
  <text x="745" y="465" text-anchor="middle" font-size="10" fill="#374151">rebase -i 可以交互式编辑</text>
  <text x="745" y="483" text-anchor="middle" font-size="10" fill="#374151">重排、合并、删除本地提交</text>
</svg>